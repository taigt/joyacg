<!DOCTYPE html>
<html lang="zh-tw">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
<meta name="description" content="JoyACG最新網址發布頁">
<title>JoyACG - 最新網址發布頁</title>
<link rel="icon" href="/favicon.ico">
<link rel="manifest" href="/manifest.json">
<link rel="apple-touch-icon" href="/android-chrome-192x192.png">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="stylesheet" href="https://unpkg.com/bootswatch@5.3.8/dist/cyborg/bootstrap.min.css">
<link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free@7.1.0/css/all.min.css">
<style>
a{text-decoration:none}
.card-header img{width:40px;height:40px;margin-right:.5rem;}
.card-header-title{font-weight:600;}
</style>
<script src="https://unpkg.com/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script defer src="https://um.268888.xyz/script.js" data-website-id="c204f4c1-0340-4aae-ab7d-0633bc946a61"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GZ44VXJD8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-5GZ44VXJD8');
</script>
</head>
<body class="bg-auto">

<div class="container my-3">
  <div class="row justify-content-center">
    <div class="col-md-6">

      <!-- 顶部公告卡片 -->
      <div class="card text-dark mb-3">
        <h3 class="card-header d-flex align-items-center">
          <img src="/android-chrome-192x192.png" class="rounded">JoyACG發布頁
        </h3>
        <div class="card-body">
          <p class="mb-1">發布頁①：<a href="https://joyacg.pages.dev" target="_blank"><span class="text-info">https://joyacg.pages.dev</span></a></p>
          <p class="mb-1">發布頁②：<a href="https://taigt.github.io/joyacg" target="_blank"><span class="text-info">https://taigt.github.io/joyacg</span></a></p>
          <p class="mb-2">最新網址都將在此更新，防迷路。請記得以上域名！永久有效！建議收藏！</p>

          <button class="btn btn-info w-100 mb-2" id="installBtn" style="display:none"><i class="fa-solid fa-desktop"></i> 安裝桌面應用程式</button>
          <button class="btn btn-primary w-100 mb-2"><i class="fa-solid fa-keyboard"></i> 按 Ctrl + D 收藏</button>
          <a href="https://joyacg.top" target="_blank" class="btn btn-warning w-100 mb-2"><i class="fa-solid fa-arrow-up-right-from-square"></i> 最新網址 joyacg.top</a>
          <a href="https://joyacg.com" target="_blank" class="btn btn-danger w-100 mb-2"><i class="fa-solid fa-arrow-up-right-from-square"></i> 永久網址 joyacg.com</a>
          <a href="https://pan.268888.xyz/s/9661da" target="_blank" class="btn btn-success w-100"><i class="fa-brands fa-android"></i> 安卓App下載</a>

        </div>
      </div>
      <!-- 顶部公告卡片 -->

      <!-- 链接卡片区域 -->
      <div class="row g-3">

        <div class="col-12 col-sm-6">
          <div class="card text-dark">
            <div class="card-header d-flex align-items-center">
              <img src="/android-chrome-192x192.png" class="rounded">
              <div>
                <div class="card-header-title">JoyACG官方群組</div>
                <small class="text-muted"><i class="fa-solid fa-users"></i> <a href="https://t.me/joyacg" target="_blank"><span class="text-danger">@joyacg</span></a></small>
              </div>
            </div>
            <div class="card-body">
              <a href="https://t.me/joyacg" target="_blank" class="btn btn-primary w-100"><i class="fa-solid fa-user-plus"></i> 加入</a>
            </div>
          </div>
        </div>

        <div class="col-12 col-sm-6">
          <div class="card text-dark">
            <div class="card-header d-flex align-items-center">
              <img src="/android-chrome-192x192.png" class="rounded">
              <div>
                <div class="card-header-title">JoyACG官方頻道</div>
                <small class="text-muted"><i class="fa-solid fa-bullhorn"></i> <a href="https://t.me/joyacg_post" target="_blank"><span class="text-danger">@joyacg_post</span></a></small>
              </div>
            </div>
            <div class="card-body">
              <a href="https://t.me/joyacg_post" target="_blank" class="btn btn-primary w-100"><i class="fa-solid fa-user-plus"></i> 加入</a>
            </div>
          </div>
        </div>

      </div>
      <!-- 链接卡片区域 -->

    </div>
  </div>
</div>

<!-- iOS安裝提示 -->
<div class="position-fixed bottom-0 start-50 translate-middle-x p-3 w-100 w-md-auto" style="z-index:999; max-width:400px;">
  <div id="iosInstallToast" class="toast align-items-center bg-info border-0 w-100" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-info">
      <strong class="me-auto text-white">安裝步驟</strong>
      <button type="button" class="btn-close ms-2 mb-1" data-bs-dismiss="toast" aria-label="Close">
        <span aria-hidden="true"></span>
      </button>
    </div>
    <div class="toast-body">
      <p class="mb-1">① ㅤ在 Safari <strong>底部</strong> 點選「<strong>分享</strong> <i class="fa-solid fa-arrow-up-from-bracket"></i>」按鈕</p>
      <p class="mb-1">② ㅤ向下滑動至「<strong>添加到主屏幕</strong> <i class="fa-regular fa-square-plus"></i>」即可</p>
    </div>
  </div>
</div>
<!-- iOS安裝提示 -->

<script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(() => console.log('Service Worker 註冊成功'))
        .catch(err => console.error('註冊失敗：', err));
    }

    let deferredPrompt;
    const installBtn = document.getElementById('installBtn');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installBtn.style.display = 'inline-block';
    });

    installBtn.addEventListener('click', () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then((choiceResult) => {
          if (choiceResult.outcome === 'accepted') {
            console.log('用戶接受安裝');
          }
          installBtn.style.display = 'none';
        });
      }
    });

    window.addEventListener('appinstalled', () => {
      console.log('PWA 已安裝');
      localStorage.setItem('pwaInstalled', 'true');
    });

    const isIos = /iphone|ipad|ipod/i.test(navigator.userAgent);
    const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

    const isStandalone = window.matchMedia('(display-mode: standalone)').matches;
    const alreadyInstalled = localStorage.getItem('pwaInstalled');

    if (!isStandalone && !alreadyInstalled && isIos && isSafari) {
      const toastEl = document.getElementById('iosInstallToast');
      const toast = new bootstrap.Toast(toastEl, { autohide: false });
      toast.show();
    }
</script>
</body>
</html>
